# Voding - Full-Stack Authentication App

A modern full-stack web application built with Next.js, Convex, and Clerk, featuring secure user authentication, real-time data synchronization, and a beautiful responsive UI.

## ğŸš€ Features

- **ğŸ” Secure Authentication**: Enterprise-grade authentication powered by Clerk
- **âš¡ Real-time Database**: Convex backend with real-time data synchronization
- **ğŸ¨ Modern UI**: Beautiful, responsive design with Tailwind CSS v4
- **ğŸ“± Mobile-First**: Responsive design that works on all devices
- **ğŸ”„ Webhook Integration**: Automatic user data synchronization via webhooks
- **âš™ï¸ Type Safety**: Full TypeScript support throughout the stack
- **ğŸ­ Animations**: Smooth animations with Framer Motion and GSAP

## ğŸ› ï¸ Tech Stack

### Frontend

- **Next.js 15** - React framework with App Router
- **React 19** - Latest React with concurrent features
- **TypeScript** - Type-safe development
- **Tailwind CSS v4** - Utility-first CSS framework
- **Framer Motion** - Animation library
- **GSAP** - Advanced animations
- **Lucide React** - Beautiful icons

### Backend

- **Convex** - Real-time backend-as-a-service
- **Clerk** - Authentication and user management
- **Svix** - Webhook verification
- **Zod** - Schema validation

### Development Tools

- **npm-run-all** - Run multiple scripts in parallel
- **ESLint** - Code linting
- **PostCSS** - CSS processing

## ğŸ“ Project Structure

```
voding/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # Root layout with providers
â”‚   â”‚   â”œâ”€â”€ page.tsx            # Home page with auth states
â”‚   â”‚   â”œâ”€â”€ globals.css         # Global styles and Tailwind
â”‚   â”‚   â””â”€â”€ not-found.tsx       # 404 page
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ConvexClientProvider.tsx  # Convex + Clerk integration
â”‚   â”œâ”€â”€ lib/                    # Utility functions
â”‚   â””â”€â”€ middleware.ts           # Next.js middleware
â”œâ”€â”€ convex/
â”‚   â”œâ”€â”€ schema.ts              # Database schema
â”‚   â”œâ”€â”€ users.ts               # User management functions
â”‚   â”œâ”€â”€ http.ts                # Webhook handlers
â”‚   â”œâ”€â”€ auth.config.ts         # Authentication configuration
â”‚   â””â”€â”€ _generated/            # Auto-generated Convex files
â”œâ”€â”€ public/                    # Static assets
â”œâ”€â”€ package.json              # Dependencies and scripts
â”œâ”€â”€ next.config.ts            # Next.js configuration
â”œâ”€â”€ tsconfig.json             # TypeScript configuration
â”œâ”€â”€ postcss.config.mjs        # PostCSS configuration
â””â”€â”€ components.json           # Shadcn UI configuration
```

## ğŸš¦ Getting Started

### Prerequisites

- Node.js 18+
- npm or yarn
- Clerk account
- Convex account

### 1. Clone the Repository

```bash
git clone <repository-url>
cd voding
npm install
```

### 2. Environment Setup

Copy the environment example file:

```bash
cp .env.example .env.local
```

### 3. Configure Clerk

1. Create a new application in [Clerk Dashboard](https://dashboard.clerk.com)
2. Get your publishable key and secret key
3. Configure JWT templates and webhooks

### 4. Configure Convex

1. Install Convex CLI: `npm install -g convex`
2. Run `npx convex dev` to set up your Convex project
3. This will generate your `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`

### 5. Update Environment Variables

Fill in your `.env.local` file:

```env
# Convex (auto-generated by `npx convex dev`)
CONVEX_DEPLOYMENT=your_deployment_id
NEXT_PUBLIC_CONVEX_URL=https://your_deployment.convex.cloud

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
NEXT_PUBLIC_CLERK_FRONTEND_API_URL=https://your-app.clerk.accounts.dev
CLERK_WEBHOOK_SECRET=whsec_...
```

### 6. Set Up Webhooks

1. In Clerk Dashboard, go to Configure â†’ Webhooks
2. Add endpoint: `https://your-convex-deployment.convex.site/clerk-users-webhook`
3. Subscribe to: `user.created`, `user.updated`, `user.deleted`
4. Copy the webhook secret to your environment variables

### 7. Deploy Environment Variables to Convex

```bash
npx convex env set NEXT_PUBLIC_CLERK_FRONTEND_API_URL your_clerk_frontend_api_url
npx convex env set CLERK_WEBHOOK_SECRET your_webhook_secret
```

### 8. Start Development

```bash
npm run dev
```

This will start both the Next.js frontend and Convex backend in parallel.

## ğŸ“Š Database Schema

### Users Table

```typescript
{
  email: string,
  first_name: string,
  last_name: string,
  clerkUser: UserJSON,  // Full Clerk user object
}
```

**Indexes:**

- `by_clerk_id` - Index on `clerkUser.id` for efficient user lookups

## ğŸ”§ API Reference

### Convex Functions

#### Queries

- `userLoginStatus()` - Check current user's login status
- `currentUser()` - Get current authenticated user
- `getUser(subject: string)` - Get user by Clerk ID (internal)

#### Mutations

- `updateOrCreateUser(clerkUser: UserJSON)` - Sync user from Clerk (internal)
- `deleteUser(id: string)` - Delete user by Clerk ID (internal)

### HTTP Endpoints

- `POST /clerk-users-webhook` - Webhook endpoint for Clerk user events
- `OPTIONS /clerk-users-webhook` - CORS preflight handler

## ğŸ¨ UI Components

The app uses a modern, responsive design with:

- **Landing Page**: Welcome screen for unauthenticated users
- **Dashboard**: Personalized dashboard for authenticated users
- **Navigation**: Responsive navigation with user menu
- **Feature Cards**: Highlighting key application features
- **User Profile**: Display user information and account details

## ğŸ”„ Authentication Flow

1. **Unauthenticated State**: Users see landing page with sign-in options
2. **Clerk Authentication**: Users sign in through Clerk's secure flow
3. **Webhook Sync**: Clerk sends user data to Convex via webhook
4. **Database Storage**: User information is stored in Convex database
5. **Authenticated State**: Users access personalized dashboard

## ğŸš€ Deployment

### Frontend (Vercel)

1. Connect your repository to Vercel
2. Add environment variables in Vercel dashboard
3. Deploy automatically on push to main branch

### Backend (Convex)

```bash
npx convex deploy
```

Update your frontend environment variables with the production Convex URL.

## ğŸ“ Scripts

- `npm run dev` - Start development servers (frontend + backend)
- `npm run dev:frontend` - Start only Next.js development server
- `npm run dev:backend` - Start only Convex development server
- `npm run build` - Build for production
- `npm run start` - Start production server
- `npm run lint` - Run ESLint
- `npm run verify-env` - Verify environment variables

## ğŸ”’ Security Features

- **JWT Authentication**: Secure token-based authentication
- **Webhook Verification**: Cryptographic verification of Clerk webhooks
- **CORS Protection**: Proper CORS headers for API endpoints
- **Environment Validation**: Runtime validation of required environment variables
- **Type Safety**: Full TypeScript coverage for compile-time safety

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ†˜ Support

If you encounter any issues:

1. Check the [Convex Documentation](https://docs.convex.dev)
2. Check the [Clerk Documentation](https://clerk.com/docs)
3. Check the [Next.js Documentation](https://nextjs.org/docs)
4. Open an issue in this repository

## ğŸ™ Acknowledgments

- [Convex](https://convex.dev) for the amazing real-time backend
- [Clerk](https://clerk.com) for secure authentication
- [Next.js](https://nextjs.org) for the powerful React framework
- [Tailwind CSS](https://tailwindcss.com) for the utility-first CSS framework
